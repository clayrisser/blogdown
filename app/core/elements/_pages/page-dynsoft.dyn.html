<dom-module id="page-dynsoft">
  <template>

  </template>

  <script>
    (function() {
      'use strict';
      Polymer({
        is: 'page-dynsoft',

        properties: {
          pageResponseData: {
            type: String
          },
          page: {
            type: Object,
            observer: '_pageChanged'
          }
        },

        _pageChanged: function() {
          Polymer.dom(this.root).innerHTML = '<dyn-' + this.page.slug + '>';
          this._loadElement(this.page.slug);
        },

        _loadElement: function(name) {
          this.importHref('../content/pages/' + name + '.dyn.html', function() {
            app.debug(name + '.dyn.html was imported.');
          }.bind(this), function() {
              window.history.back();
              app.debug('WARNING: ' + name + '.dyn.html import failed to load');
              app.toast('WARNING: ' + name + '.dyn.html import failed to load');
          }.bind(this));
        }
      });
    })();
  </script>

</dom-module>
