<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="handle-content">
  <template>

    <template is="dom-if" if="[[_isEqual(route.type, 'home')]]">
      home
    </template>

    <template is="dom-if" if="[[_isEqual(route.type, 'parent')]]">
      <handle-parent page="[[page]]"></handle-parent>
    </template>

    <template is="dom-if" if="[[_isEqual(route.type, 'child')]]">
      child
    </template>

  </template>
  <script>
    (function() {
      'use strict';
      Polymer({
        is: 'handle-content',

        behaviors: [ ReduxBehavior ],

        properties: {
          route: {
            type: Object,
            statePath: 'route',
            observer: 'routeChanged'
          },
          pages: {
            type: Array,
            statePath: 'pages'
          },
          appLoaded: {
            type: Boolean,
            statePath: 'meta.appLoaded',
            observer: 'routeChanged'
          }
        },

        routeChanged: function() {
          if (this.appLoaded) {
            var page = _.filter(this.pages, (page) => {
              return page.slug === this.route.slugs.parent;
            })[0];
            if (page) {
              this.set('page', page);
            } else {
              app.toast('Does not exist');
            }
          }
        },

        _isEqual: function(left, right) {
          return left === right;
        }
      });
    })();
  </script>
</dom-module>
