<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="handle-content">
  <template>

    <template is="dom-if" if="[[isHome]]">
      home
    </template>

    <template is="dom-if" if="[[isParent]]">
      <handle-parent page="[[page]]"></handle-parent>
    </template>

    <template is="dom-if" if="[[isChild]]">
      child
    </template>

  </template>
  <script>
    (function() {
      'use strict';
      Polymer({
        is: 'handle-content',

        properties: {
          isHome: {
            type: Boolean,
            value: true
          },
          isParent: {
            type: Boolean,
            value: true
          },
          isChild: {
            type: Boolean,
            value: true
          }
        },

        ready: function() {
          app.addEventListener('route-changed', function() {
            this.routeChanged();
          }.bind(this));
        },

        routeChanged: function() {
          var page = _.filter(app.pages, function(page) {
            return page.slug === app.route.slugs.parent;
          })[0];
          if (page) {
            this.set('page', page);
            switch(app.route.type) {
              default:
                this.set('isHome', true);
                this.set('isParent', false);
                this.set('isChild', false);
                break;
              case 'parent':
                this.set('isHome', false);
                this.set('isParent', true);
                this.set('isChild', false);
                break;
              case 'child':
                this.set('isHome', false);
                this.set('isParent', false);
                this.set('isChild', true);
                break;
            }
          } else {
            app.toast('Does not exist');
          }
        }
      });
    })();
  </script>
</dom-module>
