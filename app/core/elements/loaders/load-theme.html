<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="load-theme">
  <script>
    (function() {
      'use strict';
      Polymer({
        is: 'load-theme',

        behaviors: [ ReduxBehavior ],

        properties: {
          theme: {
            type: Object,
            statePath: 'settings.theme'
          }
        },

        load: function() {
          app.log.debug('loading theme . . .');
          return this._importTheme().then(() => {
            app.log.info('theme loaded');
            return;
          });
        },

        _importTheme: function() {
          return this._importHref('../../../content/themes/' + this.theme + '/theme-body.html').then(() => {
            return this._importHref('../../../content/themes/' + this.theme + '/theme-page.html');
          }).then(() => {
            return this._importHref('../../../content/themes/' + this.theme + '/theme-posts.html');
          }).then(() => {
            return this._importHref('../../../content/themes/' + this.theme + '/theme-post.html');
          });
        },

        _importHref: function(url) {
          return new Promise((resolve, reject) => {
            this.importHref(url, () => {
              resolve();
            }, (err) => {
              reject(err);
            });
          });
        }
      });
    })();
  </script>
</dom-module>
