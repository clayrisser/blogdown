<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="load-theme">
  <script>
    (function() {
      'use strict';
      Polymer({
        is: 'load-theme',

        load: function() {
          app.log.debug('loading theme . . .');
          var promise = new Promise((resolve, reject) => {
            this.set('resolve', resolve);
            this.set('reject', reject);
          });
          this._importTheme();
          return promise;
        },

        _importTheme: function() {
          var theme = store.getState().settings.theme;
          return new Promise((resolve, reject) => {
            this.importHref('../../../content/themes/' + theme + '/the-theme.html', () => {
              var message = 'theme loaded';
              app.log.info(message);
              this.resolve({
                message: message
              });
            }, (err) => {
              this.reject(err);
            });
          });
        }
      });
    })();
  </script>
</dom-module>
